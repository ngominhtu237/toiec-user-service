require('./helper');

var Item = require('./model');
var app = require('./app');
var assert = require('assert');
var request = require('supertest');

describe('Pagination', function () {
  beforeEach(function (done) {
    Item
      .create({name: 'Item 1'})
      .then(function () {
        Item
          .create({name: 'Item 2'})
          .then(function () {
            done();
          });
      });
  });

  describe('with limit parameter', function () {
    it('limits items', function (done) {
      request(app)
        .get('/?limit=1')
        .expect(function (res) {
          assert.equal(1, res.body.length);
        })
        .end(done);
    });
  });

  describe('with offset parameter', function () {
    it('skips items', function (done) {
      request(app)
        .get('/?offset=1')
        .expect(function (res) {
          assert.equal(1, res.body.length);
        })
        .end(done);
    });
  });
});
